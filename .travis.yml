language: cpp

compiler:
  - gcc
  - clang


matrix:
  allow_failures:
    - compiler: clang

install:
  - sudo apt-get install cmake g++ git libboost-system-dev libboost-thread-dev freeglut3 freeglut3-dev libglpk-dev python-dev python-opengl libxmu-dev libxi-dev libqt4-dev libassimp-dev libglui2c2 libglui-dev

before_script:
  - chmod +x .travis_conditional.sh
  - echo $LD_LIBRARY_PATH
  - sudo ldconfig
  # Prepare build
  #- cd Klampt
  - ./.travis_conditional.sh
  - cd Library; make deps; cd ..;
  - cmake .

script:
  - make
  - sudo make python-install
  - python -m unittest discover tests/

# safelist
branches:
  only:
  - master
  - v0.7
  - travis

notifications:
  email:
    - kris.hauser@duke.edu
    - rocchi.alessio@gmail.com
